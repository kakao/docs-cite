<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Install-rsses on Cite Documents</title>
    <link>http://tech.kakao.com/citedocs/install/index.xml</link>
    <description>Recent content in Install-rsses on Cite Documents</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Released under the Apache License 2.0</copyright>
    <lastBuildDate>Tue, 23 Aug 2016 17:27:31 +0900</lastBuildDate>
    <atom:link href="http://tech.kakao.com/citedocs/install/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Install</title>
      <link>http://tech.kakao.com/citedocs/install/</link>
      <pubDate>Tue, 23 Aug 2016 17:27:31 +0900</pubDate>
      
      <guid>http://tech.kakao.com/citedocs/install/</guid>
      <description>

&lt;h2 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Dockerfile : 서비스 repository의 root directory에 위치.

&lt;ul&gt;
&lt;li&gt;base image는 docker-alpine(&lt;a href=&#34;http://gliderlabs.viewdocs.io/docker-alpine/&#34;&gt;http://gliderlabs.viewdocs.io/docker-alpine/&lt;/a&gt;) 권장&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;gui-cite&#34;&gt;GUI: cite&lt;/h2&gt;

&lt;h3 id=&#34;생성&#34;&gt;생성&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;cite web(&lt;a href=&#34;http://cite.d.9rum.cc/&#34;&gt;http://cite.d.9rum.cc/&lt;/a&gt;) 접속&lt;/li&gt;
&lt;li&gt;최초 접속시 cite 권한 부여
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_auth.png&#34; alt=&#34;Auth&#34; /&gt;&lt;/li&gt;
&lt;li&gt;서비스 생성
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_create.png&#34; alt=&#34;Create&#34; /&gt;
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_create_form.png&#34; alt=&#34;Create Form&#34; /&gt;

&lt;ul&gt;
&lt;li&gt;GitHub : github 프로젝트 위치, 브랜치&lt;/li&gt;
&lt;li&gt;Service : 서비스명. 서비스 생성시 서비스명으로 도메인 생성&lt;/li&gt;
&lt;li&gt;HTTP Ports : container의 http/https서비스 listen port. 첫번째 포트는 80으로 redirect됨&lt;/li&gt;
&lt;li&gt;Watchcenter : 빌드/배포 이벤트를 받을 watchcenter group id&lt;/li&gt;
&lt;li&gt;Replicas : container 인스턴스 개수&lt;/li&gt;
&lt;li&gt;Auto Deploy : 자동 배포 On/Off&lt;/li&gt;
&lt;li&gt;Environment Variables : 구동시 환경변수. #으로 시작하는 줄은 주석으로 무시됨&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;서비스&#34;&gt;서비스&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;GitHub Commits 목록 중 배포할 버전 옆의 Deploy버튼 클릭. 빌드되어 있지 않은 경우 Build버튼 클릭
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_service.png&#34; alt=&#34;Service&#34; /&gt;&lt;/li&gt;
&lt;li&gt;buildbot에서 빌드 로그 조회 및 필요시 다시 빌드 수행
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_build_1.png&#34; alt=&#34;Build&#34; /&gt;
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_build_2.png&#34; alt=&#34;Build&#34; /&gt;&lt;/li&gt;
&lt;li&gt;kibana에서 배포 로그 및 런타임 로그 조회
&lt;img src=&#34;http://tech.kakao.com/citedocs/images/usage/cite_deploy.png&#34; alt=&#34;Deploy&#34; /&gt;&lt;/li&gt;
&lt;li&gt;배포에 성공하면 Deploy버튼이 Redeploy버튼으로 변경됨

&lt;ol&gt;
&lt;li&gt;환경변수 갱신 또는 replica 개수 변경시 재배포 목적&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;모니터링&#34;&gt;모니터링&lt;/h2&gt;

&lt;p&gt;influxDB의 clustering기능이 오픈소스 버전에서 제외됨에 따라(&lt;a href=&#34;https://influxdata.com/blog/update-on-influxdb-clustering-high-availability-and-monetization/&#34;&gt;https://influxdata.com/blog/update-on-influxdb-clustering-high-availability-and-monetization/&lt;/a&gt;) 별도의 Time Based Database도입 예정&lt;/p&gt;

&lt;!--
![Monitor](/images/usage/cite_log_metric.png)
* 로그 : ElasticSearch기반. 24시간 유지
![Log](/images/usage/cite_log.png)
* 상태 : InfluxDB기반.
![Metric](/images/usage/cite_metric.png)
--&gt;

&lt;h2 id=&#34;cli-kubectl&#34;&gt;CLI: kubectl&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;kubectl설치&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;brew update
brew install kubernetes-cli
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;citeui(&lt;a href=&#34;http://cite.d.9rum.cc/&#34;&gt;http://cite.d.9rum.cc/&lt;/a&gt;) 에서 프로젝트 생성&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;클러스터, 컨텍스트, 인증 토큰 설정&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl config set-cluster cite-alpha-cluster --server=http://k8s.d.9rum.cc:8080
kubectl config set-context cite-alpha-context --cluster=cite-alpha-cluster --namespace=default --user=niko-bellic
kubectl config use-context cite-alpha-context
kubectl config set-credentials niko-bellic --token=XXXXXX
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://cite.d.9rum.cc/settings/profile&#34;&gt;http://cite.d.9rum.cc/settings/profile&lt;/a&gt; 참조&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;kubectl로 인스턴스 제어&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;인스턴스 개수 조절&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;kubectl scale --replicas={NUM} replicationcontrollers {replicationcontrollers name}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>